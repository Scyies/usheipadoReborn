import type { NextPage } from "next";
import Head from "next/head";
import Button from "../components/Button";
import Input from "../components/Input";
import { supabase } from "./supa";

export type Dias = {
  id: string;
  name: string;
  created_at: Date;
};

const Home: NextPage = () => {

  async function handleSignIn(event: React.FormEvent<HTMLFormElement>) {
    event.preventDefault();
    
    const formData = new FormData(event.target as HTMLFormElement);
    const input = Object.fromEntries(formData);


    // const { user, session, error } = await supabase.auth.signIn({
    //   email: String(input.email),
    //   password: String(input.password),
    // })

    const { data, error } = await supabase.auth.signInWithPassword({
      email: String(input.email),
      password: String(input.password),
    })

    if(data) {
      console.log(data);
    }
    if(error) {
      console.log(error);
    }
    
  }
 
  return (
    <div>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <>
        <main className="mx-6 mt-8 flex flex-col justify-center text-center">
          <form onSubmit={handleSignIn} className="flex flex-col gap-4">
            <label htmlFor="" className="font-bold">e-mail</label>
            <Input name="email" />
            <label htmlFor="" className="font-bold">senha</label>
            <Input name="senha" type="password" />
            <Button type="submit">Entrar</Button>
          </form>
        </main>
      </>
    </div>
  );
};

export default Home;
